!function(e){var t={};function n(l){if(t[l])return t[l].exports;var o=t[l]={i:l,l:!1,exports:{}};return e[l].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,l){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:l})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var l=Object.create(null);if(n.r(l),Object.defineProperty(l,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(l,o,function(t){return e[t]}.bind(null,o));return l},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=22)}([function(e,t,n){var l=n(8),o=n(10),i=/[&<>"']/g,r=RegExp(i.source);e.exports=function(e){return(e=o(e))&&r.test(e)?e.replace(i,l):e}},function(e,t,n){var l=n(12).Symbol;e.exports=l},function(module,exports,__webpack_require__){var _={escape:__webpack_require__(0)};module.exports=function(obj){obj||(obj={});var __t,__p="",__j=Array.prototype.join;function print(){__p+=__j.call(arguments,"")}with(obj)__p+='\n<a data-toggle="dropdown"\n   href="#"\n   class="dropdown-toggle pull-right visible-lg-inline-block visible-md-inline-block visible-xs-inline-block visible-sm-inline-block"\n   role="button">\n    <b><span class="caret"></span></b>\n</a>\n<a data-toggle="tab"\n   class="visible-lg-inline-block visible-md-inline-block visible-xs-inline-block visible-sm-inline-block mainentry"\n   style="border-right: 0px;"><b>'+(null==(__t=_.escape(name))?"":__t)+'</b></a>\n<ul class="dropdown-menu" role="menu">\n    ',model.forEach(function(e){__p+='\n    <li>\n        <a data-toggle="tab"\n           class="menuEntry"\n           data-model-cid="'+(null==(__t=e.cid)?"":__t)+'"\n           data-model-uuid="'+(null==(__t=e.escape("id"))?"":__t)+'"\n           id="subtab_item_'+(null==(__t=e.escape("id"))?"":__t)+'"\n           href="#subtab_'+(null==(__t=e.escape("id"))?"":__t)+'">'+(null==(__t=e.has("server_name")?e.escape("server_name"):e.escape("port"))?"":__t)+"</a>\n    </li>\n    "}),__p+="\n</ul>\n";return __p}},function(module,exports,__webpack_require__){var _={escape:__webpack_require__(0)};module.exports=function(obj){obj||(obj={});var __t,__p="";with(obj)__p+='<td class="time">'+(null==(__t=model.escape("time"))?"":__t)+'</td>\n<td class="remote_ip">'+(null==(__t=model.escape("remote_ip"))?"":__t)+'</td>\n<td class="username">'+(null==(__t=model.escape("username"))?"":__t)+'</td>\n<td class="status">'+(null==(__t=model.escape("status"))?"":__t)+'</td>\n<td class="size">'+(null==(__t=model.escape("size"))?"":__t)+'</td>\n<td class="referer">'+(null==(__t=model.escape("http_referer"))?"":__t)+'</td>\n<td class="user_agent">'+(null==(__t=model.escape("user_agent"))?"":__t)+'</td>\n<td class="forwarded_for">'+(null==(__t=model.escape("forwarded_for"))?"":__t)+'</td>\n<td class="request_line">'+(null==(__t=model.escape("request_line"))?"":__t)+"</td>\n";return __p}},function(module,exports,__webpack_require__){var _={escape:__webpack_require__(0)};module.exports=function(obj){obj||(obj={});var __t,__p="";with(obj)__p+='<td class="time">'+(null==(__t=model.escape("time"))?"":__t)+'</td>\n<td class="remote_ip">'+(null==(__t=model.escape("remote_ip"))?"":__t)+'</td>\n<td class="status">'+(null==(__t=model.escape("status"))?"":__t)+'</td>\n<td class="bytes_sent">'+(null==(__t=model.escape("bytes_sent"))?"":__t)+'</td>\n<td class="bytes_received">'+(null==(__t=model.escape("bytes_received"))?"":__t)+'</td>\n<td class="session_time">'+(null==(__t=model.escape("session_time"))?"":__t)+"</td>\n";return __p}},function(module,exports,__webpack_require__){var _={escape:__webpack_require__(0)};module.exports=function(obj){obj||(obj={});var __t,__p="";with(obj)__p+='<td class="date">'+(null==(__t=model.escape("date"))?"":__t)+'</td>\n<td class="time">'+(null==(__t=model.escape("time"))?"":__t)+'</td>\n<td class="severity">'+(null==(__t=model.escape("severity"))?"":__t)+'</td>\n<td class="number">'+(null==(__t=model.escape("number"))?"":__t)+'</td>\n<td class="message">'+(null==(__t=model.escape("message"))?"":__t)+"</td>\n";return __p}},function(module,exports,__webpack_require__){var _={escape:__webpack_require__(0)};module.exports=function(obj){obj||(obj={});var __t,__p="",__j=Array.prototype.join;function print(){__p+=__j.call(arguments,"")}with(obj){let count=0;__p+='<table class="table table-striped">\n    <thead>\n        <tr>\n            ',"errors"===log_type||"stream_errors"===log_type?(count=5,__p+="\n            <th>Date</th>\n            <th>Time</th>\n            <th>Severity</th>\n            <th>Number</th>\n            <th>Message</th>\n            "):"accesses"===log_type?(count=9,__p+="\n            <th>Time</th>\n            <th>Remote IP</th>\n            <th>Username</th>\n            <th>Status</th>\n            <th>Size</th>\n            <th>Referer</th>\n            <th>User Agent</th>\n            <th>Forwarded For</th>\n            <th>Request Line</th>\n            "):(count=6,__p+="\n            <th>Time</th>\n            <th>Remote IP</th>\n            <th>Status</th>\n            <th>Bytes Sent</th>\n            <th>Bytes Received</th>\n            <th>Session Time</th>\n            "),__p+='\n        </tr>\n        <tr class="filter">\n            ',"errors"===log_type||"stream_errors"===log_type?__p+='\n            <td><input type="text" value="'+(null==(__t=model.escape("date"))?"":__t)+'" name="date" /></td>\n            <td><input type="text" value="'+(null==(__t=model.escape("time"))?"":__t)+'" name="time" /></td>\n            <td><input type="text" value="'+(null==(__t=model.escape("severity"))?"":__t)+'" name="severity" /></td>\n            <td><input type="text" value="'+(null==(__t=model.escape("number"))?"":__t)+'" name="number" /></td>\n            <td><input type="text" value="'+(null==(__t=model.escape("message"))?"":__t)+'" name="message" /></td>\n            ':"accesses"===log_type?__p+='\n            <td><input type="text" value="'+(null==(__t=model.escape("time"))?"":__t)+'" name="time" /></td>\n            <td><input type="text" value="'+(null==(__t=model.escape("remote_ip"))?"":__t)+'" name="remote_ip" /></td>\n            <td><input type="text" value="'+(null==(__t=model.escape("username"))?"":__t)+'" name="username" /></td>\n            <td><input type="text" value="'+(null==(__t=model.escape("status"))?"":__t)+'" name="status" /></td>\n            <td><input type="text" value="'+(null==(__t=model.escape("size"))?"":__t)+'" name="size" /></td>\n            <td><input type="text" value="'+(null==(__t=model.escape("http_referer"))?"":__t)+'" name="http_referer" /></td>\n            <td><input type="text" value="'+(null==(__t=model.escape("user_agent"))?"":__t)+'" name="user_agent" /></td>\n            <td><input type="text" value="'+(null==(__t=model.escape("forwarded_for"))?"":__t)+'" name="forwarded_for" /></td>\n            <td><input type="text" value="'+(null==(__t=model.escape("request_line"))?"":__t)+'" name="request_line" /></td>\n            ':__p+='\n            <td><input type="text" value="'+(null==(__t=model.escape("time"))?"":__t)+'" name="time" /></td>\n            <td><input type="text" value="'+(null==(__t=model.escape("remote_ip"))?"":__t)+'" name="remote_ip" /></td>\n            <td><input type="text" value="'+(null==(__t=model.escape("status"))?"":__t)+'" name="status" /></td>\n            <td><input type="text" value="'+(null==(__t=model.escape("bytes_sent"))?"":__t)+'" name="bytes_sent" /></td>\n            <td><input type="text" value="'+(null==(__t=model.escape("bytes_received"))?"":__t)+'" name="bytes_received" /></td>\n            <td><input type="text" value="'+(null==(__t=model.escape("session_time"))?"":__t)+'" name="session_time" /></td>\n            ',__p+='\n        </tr>\n    </thead>\n    <tbody>\n    </tbody>\n    <tfoot>\n        <tr>\n            <td>\n                <button class="btn btn-primary" id="paging_back"><i class="fa fa-backward" aria-hidden="true"></i></button>\n                <button class="btn btn-primary" id="paging_forward"><i class="fa fa-forward " aria-hidden="true"></i></button>\n            </td>\n            <td colspan="3">\n                Entries per page:\n                <input type="range" list="tickmarks" min="5" max="1000" step="5" id="entrycount" value="100" />\n                <datalist id="tickmarks">\n                    <option value="5" label="5">\n                    <option value="100" label="100">\n                    <option value="200" label="200">\n                    <option value="300">\n                    <option value="400">\n                    <option value="500" label="500">\n                    <option value="600">\n                    <option value="700">\n                    <option value="800">\n                    <option value="900">\n                    <option value="1000" label="1000">\n                </datalist>\n            </td>\n            <td colspan="'+(null==(__t=count-3)?"":__t)+'"></td>\n        </tr>\n    </tfoot>\n</table>\n'}return __p}},function(module,exports,__webpack_require__){var _={escape:__webpack_require__(0)};module.exports=function(obj){obj||(obj={});var __t,__p="";with(obj)__p+='<div style="text-align: center;">\n    No data avialable\n</div>\n';return __p}},function(e,t,n){var l=n(9)({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});e.exports=l},function(e,t){e.exports=function(e){return function(t){return null==e?void 0:e[t]}}},function(e,t,n){var l=n(11);e.exports=function(e){return null==e?"":l(e)}},function(e,t,n){var l=n(1),o=n(15),i=n(16),r=n(17),a=1/0,_=l?l.prototype:void 0,s=_?_.toString:void 0;e.exports=function e(t){if("string"==typeof t)return t;if(i(t))return o(t,e)+"";if(r(t))return s?s.call(t):"";var n=t+"";return"0"==n&&1/t==-a?"-0":n}},function(e,t,n){var l=n(13),o="object"==typeof self&&self&&self.Object===Object&&self,i=l||o||Function("return this")();e.exports=i},function(e,t,n){(function(t){var n="object"==typeof t&&t&&t.Object===Object&&t;e.exports=n}).call(this,n(14))},function(e,t){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t){e.exports=function(e,t){for(var n=-1,l=null==e?0:e.length,o=Array(l);++n<l;)o[n]=t(e[n],n,e);return o}},function(e,t){var n=Array.isArray;e.exports=n},function(e,t,n){var l=n(18),o=n(21),i="[object Symbol]";e.exports=function(e){return"symbol"==typeof e||o(e)&&l(e)==i}},function(e,t,n){var l=n(1),o=n(19),i=n(20),r="[object Null]",a="[object Undefined]",_=l?l.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?a:r:_&&_ in Object(e)?o(e):i(e)}},function(e,t,n){var l=n(1),o=Object.prototype,i=o.hasOwnProperty,r=o.toString,a=l?l.toStringTag:void 0;e.exports=function(e){var t=i.call(e,a),n=e[a];try{e[a]=void 0;var l=!0}catch(e){}var o=r.call(e);return l&&(t?e[a]=n:delete e[a]),o}},function(e,t){var n=Object.prototype.toString;e.exports=function(e){return n.call(e)}},function(e,t){e.exports=function(e){return null!=e&&"object"==typeof e}},function(e,t,n){"use strict";n.r(t);const l=new Backbone.Collection([{name:"HTTP Access Logs",logType:"accesses"},{name:"HTTP Error Logs",logType:"errors"},{name:"Stream Access Logs",logType:"stream_accesses"},{name:"Stream Error Logs",logType:"stream_errors"}]);var o=Backbone.Model.extend({});var i=Backbone.Collection.extend({model:o,url:function(){return"/api/nginx/logs/"+this.logType},initialize:function(e){this.logType=e.logType}}),r=n(2),a=n.n(r);var _=Backbone.View.extend({tagName:"li",events:{"click .mainentry":"mainMenuClick","click .menuEntry":"menuEntryClick"},initialize:function(e){this.listenTo(this.collection,"sync",this.render),this.listenTo(this.collection,"update",this.render),this.logview=e.logview},render:function(){this.$el.html(""),this.renderCollection()},renderCollection:function(){this.$el.addClass("dropdown"),this.$el.html(""),this.$el.append(a()({model:this.collection,name:this.model.attributes.name}))},mainMenuClick:function(){this.collection.models[0]&&this.handleElementClick(this.collection.models[0].id)},menuEntryClick:function(e){this.handleElementClick(e.target.dataset.modelUuid)},handleElementClick:function(e){this.logview.get_log(this.model.get("logType"),e)}});var s=Backbone.View.extend({tagName:"ul",className:"nav nav-tabs",initialize:function(e){this.listenTo(this.collection,"sync",this.render),this.listenTo(this.collection,"update",this.render),this.logview=e.logview},render:function(){this.$el.attr("role","tablist"),this.$el.html(""),this.collection.forEach(e=>this.render_one(e))},render_one:function(e){const t=new i({uuid:e.get("url"),logType:e.get("logType")}),n=new _({collection:t,model:e,logview:this.logview});this.$el.append(n.$el),t.fetch()}}),c=n(3),u=n.n(c),d=n(4),p=n.n(d),m=n(5),h=n.n(m),f=n(6),b=n.n(f);var g=Backbone.Model.extend({});var y=Backbone.Collection.extend({model:g,url:function(){return`/api/nginx/logs/${this.logType}/${this.uuid}`},initialize:function(){this.logType="none",this.uuid="none"},parse:function(e){return"error"in e?[]:e},filter_collection:function(e){const t=e.keys();return this.filter(function(n){if(!n)return!1;for(let l=0;l<t.length;l++){const o=t[l];if("string"==typeof e.get(o)&&0!==e.get(o).length){if(!n.has(o))return!1;if(!n.get(o).includes(e.get(o)))return!1}}return!0})}}),v=n(7),x=n.n(v);const w=Backbone.View.extend({tagName:"tr",initialize:function(e){this.type=e.type},render:function(){this.$el.html(this.get_template()({model:this.model}))},get_template:function(){return"accesses"===this.type?u.a:"stream_accesses"===this.type?p.a:h.a}});const k=new(Backbone.View.extend({tagName:"div",className:"content-box tab-content",events:{"keyup .filter input":"update_filter","click #paging_back":"page_back","click #paging_forward":"page_forward","change #entrycount":"change_entry_count"},page_entry_count:100,current_page:0,current_filtered_collection:null,initialize:function(){this.collection=new y,this.filter_model=new Backbone.Model,this.listenTo(this.collection,"sync",this.clear_and_render),this.listenTo(this.collection,"update",this.clear_and_render),this.listenTo(this.filter_model,"change",this.clear_and_render),this.type=""},render:function(){let e=this.$el.find("tbody");if(e.length<1?0!==this.collection.length?(this.$el.html(b()({log_type:this.type,model:this.filter_model})),e=this.$el.find("tbody")):this.$el.html(x.a):e.html(""),0!==this.collection.length){null==this.current_filtered_collection&&(this.current_filtered_collection=this.collection.filter_collection(this.filter_model));const t=this.current_page*this.page_entry_count,n=t+this.page_entry_count;this.current_filtered_collection.slice(t,n).forEach(t=>this.render_one(e,t))}},render_one:function(e,t){const n=new w({type:this.type,model:t});n.render(),e.append(n.$el)},get_log:function(e,t){this.collection.uuid=t,this.collection.logType=e,this.type=e,this.$el.html(""),this.filter_model.clear(),this.update()},update:function(){this.collection.fetch()},clear_and_render:function(){this.current_filtered_collection=null,this.render()},update_filter:function(e){const t=e.target;this.filter_model.set(t.name,$(t).val())},page_back:function(){this.current_page>0&&(this.current_page--,this.render())},page_forward:function(){(this.current_page+1)*this.page_entry_count<this.collection.length&&(this.current_page++,this.render())},change_entry_count:function(e){this.page_entry_count=e.target.value,this.current_page=0,this.render()}})),j=new s({collection:l,logview:k});$(document.getElementById("logapplication")).append(j.$el).append(k.$el),j.render()}]);